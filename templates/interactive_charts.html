{% extends "base.html" %}
{% block title %}Interactive Charts{% endblock %}
{% block content %}
<h2>Interactive Charts (Real Production/Exports)</h2>
<nav aria-label="Breadcrumb"><a href="{{ url_for('dashboard') }}">Dashboard</a> > Charts</nav>
<form method="GET" aria-label="Filter charts" style="margin-bottom: 20px;">
    <select name="mineral" aria-label="Select mineral">
        <option value="all">All Minerals</option>
        {% for m in minerals %}
        <option value="{{ m }}" {% if request.args.get('mineral') == m %}selected{% endif %}>{{ m }}</option>
        {% endfor %}
    </select>
    <select name="country" aria-label="Select country">
        <option value="all">All Countries</option>
        {% for c in countries %}
        <option value="{{ c }}" {% if request.args.get('country') == c %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
    </select>
    <button type="submit">Filter Data</button>
</form>
<div class="chart-wrapper" style="margin-bottom: 24px; border: 1px solid #ddd; border-radius: 8px; padding: 8px;" role="region" aria-label="Production trends chart">
    {{ chart_div | safe }}
</div>
<div class="chart-wrapper" style="border: 1px solid #ddd; border-radius: 8px; padding: 8px;" role="region" aria-label="Export value trends chart">
    {{ price_div | safe }}
</div>
<div aria-live="polite" id="chart-status" class="visually-hidden">Charts rendered. Use filters to update.</div>
<p style="text-align: center; color: #666;">Bar for production (grouped by year/mineral). Line for exports (trends). Hover for details. Data from production_stats.csv (2023-2024).</p>
<p style="margin-top:18px; text-align:center;"><a href="{{ url_for('dashboard') }}" class="btn-back">‚Üê Back to Dashboard</a></p>
{% endblock %}